---
layout:     post
title:      charles开发测试手册
subtitle:   charles各种功能详解
date:       2017-01-06
author:     BY
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - h5调试工具
    - charles手册
---
# 简介
![](https://thumbnail0.baidupcs.com/thumbnail/fb7a847a7bbbd3ab5111e541c18c0070?fid=3198699892-250528-323012830027931&time=1572487200&rt=sh&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-UkyT5aMCIaC8rgP6nEz16Q4fduU%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=119632765031564236&dp-callid=0&size=c710_u400&quality=100&vuk=-&ft=video)
Charles 是在 Mac 下常用的网络封包截取工具，在做
移动开发时，我们为了调试与服务器端的网络通讯协议，常常需要截取网络封包来分析。

Charles 通过将自己设置成系统的网络访问代理服务器，使得所有的网络访问请求都通过它来完成，从而实现了网络封包的截取和分析。
除了在做移动开发中调试端口外，Charles 也可以用于分析第三方应用的通讯协议。配合 Charles 的 SSL 功能，Charles 还可以分析 Https 协议。

harles 是收费软件，可以免费试用 30 天。试用期过后，未付费的用户仍然可以继续使用，但是每次使用时间不能超过 30 分钟，并且启动时将会有 10 秒种的延时。因此，该付费方案对广大用户还是相当友好的，即使你长期不付费，也能使用完整的软件功能。只是当你需要长时间进行封包调试时，会因为 Charles 强制关闭而遇到影响。

#### Charles 主要的功能包括：
    1.截取 Http 和 Https 网络封包。
    2.支持重发网络请求，方便后端调试。
    3.支持修改网络请求参数。
    4.支持网络请求的截获并动态修改。
    5.支持模拟慢速网络。
#### Charles 4 新增的主要功能包括：
    1.支持 Http 2。
    2.支持 IPv6。

# 安装Charles

去 Charles 的官方网站（http://www.charlesproxy.com）下载最新版的 Charles 安装包，是一个 dmg 后缀的文件。打开后将 Charles 拖到 Application 目录下即完成安装。

# 将 Charles 设置成系统代理
之前提到，Charles 是通过将自己设置成代理服务器来完成封包截取的，所以使用 Charles 的第一步是将其设置成系统的代理服务器。
启动 Charles 后，第一次 Charles 会请求你给它设置系统代理的权限。你可以输入登录密码授予 Charles 该权限。你也可以忽略该请求，然后在需要将 Charles 设置成系统代理时，选择菜单中的 “Proxy” -> “Mac OS X Proxy” 来将 Charles 设置成系统代理。如下所示:
![](https://thumbnail0.baidupcs.com/thumbnail/2d0b09831ae777f0b6715a2d875e581c?fid=3198699892-250528-955729683886487&time=1572487200&rt=sh&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-SOZ6ZZkqK9vP6wWmH5Q%2F1%2FqOJZw%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=119772194041466699&dp-callid=0&size=c710_u400&quality=100&vuk=-&ft=video)
之后，你就可以看到源源不断的网络请求出现在 Charles 的界面中。
需要注意的是，Chrome 和 Firefox 浏览器默认并不使用系统的代理服务器设置，而 Charles 是通过将自己设置成代理服务器来完成封包截取的，所以在默认情况下无法截取 Chrome 和 Firefox 浏览器的网络通讯内容。如果你需要截取的话，在 Chrome 中设置成使用系统的代理服务器设置即可，或者直接将代理服务器设置成 127.0.0.1:8888 也可达到相同效果。
# Charles 主界面介绍